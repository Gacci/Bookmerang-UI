<swiper-container
  #swiper
  [config]="config"
  class="swiper"
  effect="fade"
  no-swiping="true"
  a11y="false"
>
  <swiper-slide class="bg-white swiper-no-swiping">
    <div class="px-16 py-12">
      <svg
        class="w-12 h-12 p-3 mx-auto my-8 border border-gray-300 rounded-md"
        fill="#000000"
        viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M7.7 4.7C9.36 3.07 12.68 2 16.17 2S23 3.06 24.6 4.7A1 1 0 0 0 26 3.3C23.6.86 19.34 0 16.16 0S8.72.87 6.3 3.3a1 1 0 0 0 1.4 1.4zM29.2 12.55C26.38 6.88 22 4 16.17 4s-10.22 2.88-13 8.55a1 1 0 0 0 .44 1.34 1 1 0 0 0 1.35-.45C7.4 8.45 11.08 6 16.15 6s8.77 2.44 11.27 7.45a1 1 0 0 0 .9.55.87.87 0 0 0 .44-.1 1 1 0 0 0 .45-1.35zM19.4 28.08c-4.13-1.77-5.8-4.5-6-6.5a2.87 2.87 0 0 1 1.13-2.75c.85-.57 2.1.24 3.87 1.52s4.13 3 6.17 1.45c1.8-1.35 2.34-3.76 1.45-6.44A10.85 10.85 0 0 0 16.16 8C7.2 8 4 15.75 4 23a1 1 0 0 0 2 0c0-3 .73-13 10.16-13 3.9 0 7 3.1 8 6 .3.87.8 3-.75 4.2-.8.6-2-.2-3.8-1.47s-4.07-2.94-6.14-1.56a4.87 4.87 0 0 0-2 4.6c.24 2.56 2.24 6 7.18 8.15A1 1 0 0 0 19 30a1 1 0 0 0 .4-1.92zM10 19.24a7.06 7.06 0 0 1 5.2-4.65c2.24-.43 4.32.6 6 3a1 1 0 1 0 1.62-1.17c-2.9-4.07-6.27-4.12-8-3.8A9.1 9.1 0 0 0 8 18.77c-1 3.94.43 8.27 4.2 12.87a1 1 0 0 0 .8.37.94.94 0 0 0 .63-.23 1 1 0 0 0 .14-1.4c-3.34-4.1-4.62-7.83-3.77-11.13zM25.3 24.3a3 3 0 0 1-3.06.63c-2.4-.57-4.78-2.7-5.3-4.25a1 1 0 1 0-1.9.64c.8 2.33 3.87 4.88 6.74 5.56a6.84 6.84 0 0 0 1.52.18 4.7 4.7 0 0 0 3.4-1.35 1 1 0 0 0-1.4-1.4z"
        />
      </svg>

      <h4 class="h4 text-center">Forgot your password?</h4>
      <p class="text-gray-500 text-sm text-center">
        Enter your email address to recover your password.
      </p>

      <form
        class="mt-8"
        [formGroup]="startPasswordRecoveryGroup"
        (ngSubmit)="handleStartRecovery()"
      >
        <div class="input-box mb-4">
          <h6 class="h6">Email</h6>
          <input
            class="w-full"
            type="text"
            autocomplete="email"
            placeholder="john.smith@cougars.csusm.edu"
            formControlName="email"
            [class.error-on]="email.invalid && email.dirty"
          />

          <small
            class="input-error"
            *ngIf="
              email.invalid && email.value && (email.dirty || email.touched)
            "
          >
            Please type a valid email
          </small>
        </div>

        <button
          class="w-full btn-blue-600"
          type="submit"
          [disabled]="startPasswordRecoveryGroup.invalid"
        >
          Recover Password

          <status-spinner
            *ngIf="resetPasswordRequest.sent && !resetPasswordRequest.done"
          ></status-spinner>
        </button>

        <div class="text-center mt-8">
          <a class="a mini muted" [routerLink]="['/sign-in']"
            >&leftarrow; Back to Login</a
          >
        </div>
      </form>
    </div>
  </swiper-slide>

  <swiper-slide class="bg-white swiper-no-swiping">
    <div class="px-16 py-12">
      <svg
        class="w-12 h-12 p-3 mx-auto my-8 border border-gray-300 rounded-md"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M23 6V18C23 19.6523 21.6523 21 20 21H4C2.34772 21 1 19.6523 1 18V6C1 4.34315 2.34315 3 4 3H20C21.6569 3 23 4.34315 23 6ZM3.10658 5.55395C3.27196 5.22692 3.61204 5 4 5H20C20.388 5 20.728 5.22692 20.8934 5.55395L12 11.7793L3.10658 5.55395ZM3 7.92066L10.8531 13.4178C11.5417 13.8999 12.4583 13.8999 13.1469 13.4178L21 7.92066V18C21 18.5477 20.5477 19 20 19H4C3.45228 19 3 18.5477 3 18V7.92066Z"
          fill="#000000"
        />
      </svg>

      <h4 class="h4 text-center">Get Your Code</h4>
      <p class="text-gray-500 text-sm text-center">
        Please enter the <strong class="text-gray-600">6-digit</strong> code that send to your email.
        <ng-container *ngIf="!!expiresInSeconds">
          Code will expore in <strong class="text-gray-600">{{ expiresInSeconds }}s</strong>
        </ng-container>
      </p>

      <form
        class="mt-8"
        [formGroup]="verifyRequestTokenGroup"
        (ngSubmit)="handleVerifyRequestCode()"
      >
        <div class="input-box mb-4">
          <input
            class="w-full text-lg tracking-widest-5xl !font-bold"
            type="text"
            autocomplete="email"
            formControlName="token"
          />
        </div>

        <button
          class="w-full btn-blue-600"
          type="submit"
          [disabled]="!expiresInSeconds || verifyRequestTokenGroup.invalid"
        >
          Verify & Continue

          <status-spinner
            *ngIf="resendPasswordRequest.sent && !resendPasswordRequest.done"
          ></status-spinner>
        </button>

        <div class="text-center mt-6">
          <span class="text-sm text-gray-500">Didn't receieve a code?</span>
          <a class="a text-sm" (click)="handleResendRecoveryCode()"> Resend </a>
        </div>

        <div class="text-center mt-6">
          <a class="a mini muted" [routerLink]="['/sign-in']"
            >&leftarrow; Back to Login</a
          >
        </div>
      </form>
    </div>
  </swiper-slide>

  <swiper-slide class="bg-white swiper-no-swiping">
    <div class="px-16 py-12">
      <svg
        class="w-12 h-12 p-3 mx-auto my-8 border border-gray-300 rounded-md"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12 10V14M10.2676 11L13.7317 13M13.7314 11L10.2673 13"
          stroke="#1C274C"
          stroke-width="1.5"
          stroke-linecap="round"
        />
        <path
          d="M6.73241 10V14M4.99999 11L8.46409 13M8.46386 11L4.99976 13"
          stroke="#1C274C"
          stroke-width="1.5"
          stroke-linecap="round"
        />
        <path
          d="M17.2681 10V14M15.5356 11L18.9997 13M18.9995 11L15.5354 13"
          stroke="#1C274C"
          stroke-width="1.5"
          stroke-linecap="round"
        />
        <path
          d="M22 12C22 15.7712 22 17.6569 20.8284 18.8284C19.6569 20 17.7712 20 14 20H10C6.22876 20 4.34315 20 3.17157 18.8284C2 17.6569 2 15.7712 2 12C2 8.22876 2 6.34315 3.17157 5.17157C4.34315 4 6.22876 4 10 4H14C17.7712 4 19.6569 4 20.8284 5.17157C21.4816 5.82475 21.7706 6.69989 21.8985 8"
          stroke="#1C274C"
          stroke-width="1.5"
          stroke-linecap="round"
        />
      </svg>

      <h4 class="h4 text-center">Set new password</h4>
      <p class="text-gray-500 text-sm text-center">Choose a new password</p>

      <form
        class="mt-8 mb-2"
        [formGroup]="changePasswordGroup"
        (ngSubmit)="handleChangePassword()"
      >
        <input type="hidden" formControlName="email" />
        <input type="hidden" formControlName="token" />

        <div class="input-box mb-4">
          <h6 class="h6">Choose Password</h6>
          <input
            class="w-full"
            type="password"
            autocomplete="password"
            placeholder="********"
            formControlName="password"
            [class.error-on]="
              password.invalid && password.dirty && !!password.value
            "
          />

          <!-- <password-checker 
            class="password-checker"
            [input]="password.value"></password-checker> -->

          <ng-container
            *ngIf="
              (password.dirty || password.touched) &&
              password.value &&
              password.invalid
            "
          >
            <small
              class="input-error"
              *ngIf="
                password.hasError('pattern') &&
                !password.hasError('passwordMismatch')
              "
            >
              Password does not meet requirements
            </small>
            <small
              class="input-error"
              *ngIf="
                confirmed.value &&
                !password.hasError('pattern') &&
                password.hasError('passwordMismatch')
              "
            >
              Passwords don't match
            </small>
          </ng-container>
        </div>

        <div class="input-box">
          <h6 class="h6">Confirm Password</h6>
          <input
            class="w-full"
            type="password"
            autocomplete="email"
            placeholder="********"
            formControlName="confirmed"
            [class.error-on]="
              confirmed.invalid && confirmed.dirty && !!confirmed.value
            "
          />

          <!-- <password-checker 
            class="password-checker"
            [input]="confirmed.value"></password-checker> -->

          <ng-container
            *ngIf="
              (confirmed.dirty || confirmed.touched) &&
              confirmed.value &&
              confirmed.invalid
            "
          >
            <small
              class="input-error"
              *ngIf="
                confirmed.hasError('pattern') &&
                !confirmed.hasError('passwordMismatch')
              "
            >
              Password does not meet requirements
            </small>
            <small
              class="input-error"
              *ngIf="
                password.value &&
                !confirmed.hasError('pattern') &&
                confirmed.hasError('passwordMismatch')
              "
            >
              Passwords don't match
            </small>
          </ng-container>
        </div>

        <button
          class="w-full btn-blue-600 mt-8"
          type="submit"
          [disabled]="changePasswordGroup.invalid"
        >
          Change Password

          <status-spinner
            *ngIf="changePasswordRequest.sent && !changePasswordRequest.done"
          ></status-spinner>
        </button>

        <div class="text-center mt-6">
          <a class="a mini muted" [routerLink]="['/sign-in']"
            >&leftarrow; Back to Login</a
          >
        </div>
      </form>
    </div>
  </swiper-slide>

  <swiper-slide class="bg-white swiper-no-swiping">
    <div class="px-16 py-12">
      <h1 class="h1 text-center">You are all set!</h1>
      <p class="text-gray-500 text-sm text-center">
        You have successfully changed your password.
      </p>
    </div>
  </swiper-slide>
</swiper-container>
